import{t as T,y as M,A as yt,P as se,S as xt,as as ne,J as re,at as ie,n as oe,D as ae,d as D,au as le,av as ue,aw as B,o as S,b as P,e as tt,f as lt,h as et,a7 as Gt,F as U,g as j,i as G,r as Vt,c as ut,k as Ut,a8 as Tt,l as O,a6 as Yt,x as at,v as Mt,ab as ce,ax as de}from"./modules/vue-DJHzUJr2.js";import{U as he,a as st,v as bt,Y as St,Z as Dt,$ as fe,O as pe,a0 as jt,Q as It,A as At,z as Pt,V as me,a1 as _e,_ as I,d as ve,a2 as ge,a3 as ye,a4 as xe,a5 as Se,a6 as we,a7 as be}from"./index-B9h3ow_G.js";import{u as nt}from"./slidev/context-DI1JsmRv.js";import{B as Pe}from"./modules/unplugin-icons-C0KVo0jh.js";function ke(t){var s;return{info:T(((s=he(t))==null?void 0:s.meta.slide)??null),update:async()=>{}}}const wt={};function Gs(t){function s(e){return wt[e]??(wt[e]=ke(e))}return{info:M({get(){return s(yt(t)).info.value},set(e){s(yt(t)).info.value=e}}),update:async(e,n)=>{const i=s(n??yt(t)),r=await i.update(e);return r&&(i.info.value=r),r}}}var $e=Object.defineProperty,Ot=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,Ft=(t,s,e)=>s in t?$e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,kt=(t,s)=>{for(var e in s||(s={}))Ee.call(s,e)&&Ft(t,e,s[e]);if(Ot)for(var e of Ot(s))Me.call(s,e)&&Ft(t,e,s[e]);return t},Ce=()=>({emit(t,...s){for(let e=0,n=this.events[t]||[],i=n.length;e<i;e++)n[e](...s)},events:{},on(t,s){var e;return((e=this.events)[t]||(e[t]=[])).push(s),()=>{var n;this.events[t]=(n=this.events[t])==null?void 0:n.filter(i=>s!==i)}}});function Kt(t,s,e,n=i=>i){return t*n(.5-s*(.5-e))}function Le(t){return[-t[0],-t[1]]}function N(t,s){return[t[0]+s[0],t[1]+s[1]]}function C(t,s){return[t[0]-s[0],t[1]-s[1]]}function L(t,s){return[t[0]*s,t[1]*s]}function Ne(t,s){return[t[0]/s,t[1]/s]}function Q(t){return[t[1],-t[0]]}function qt(t,s){return t[0]*s[0]+t[1]*s[1]}function Te(t,s){return t[0]===s[0]&&t[1]===s[1]}function De(t){return Math.hypot(t[0],t[1])}function je(t){return t[0]*t[0]+t[1]*t[1]}function Ht(t,s){return je(C(t,s))}function Zt(t){return Ne(t,De(t))}function Ie(t,s){return Math.hypot(t[1]-s[1],t[0]-s[0])}function J(t,s,e){let n=Math.sin(e),i=Math.cos(e),r=t[0]-s[0],a=t[1]-s[1],o=r*i-a*n,l=r*n+a*i;return[o+s[0],l+s[1]]}function $t(t,s,e){return N(t,L(C(s,t),e))}function Rt(t,s,e){return N(t,L(s,e))}var{min:V,PI:Ae}=Math,zt=.275,W=Ae+1e-4;function Oe(t,s={}){let{size:e=16,smoothing:n=.5,thinning:i=.5,simulatePressure:r=!0,easing:a=v=>v,start:o={},end:l={},last:c=!1}=s,{cap:g=!0,easing:p=v=>v*(2-v)}=o,{cap:_=!0,easing:f=v=>--v*v*v+1}=l;if(t.length===0||e<=0)return[];let d=t[t.length-1].runningLength,u=o.taper===!1?0:o.taper===!0?Math.max(e,d):o.taper,m=l.taper===!1?0:l.taper===!0?Math.max(e,d):l.taper,x=Math.pow(e*n,2),w=[],h=[],k=t.slice(0,10).reduce((v,E)=>{let y=E.pressure;if(r){let b=V(1,E.distance/e),_t=V(1,1-b);y=V(1,v+(_t-v)*(b*zt))}return(v+y)/2},t[0].pressure),$=Kt(e,i,t[t.length-1].pressure,a),ht,ft=t[0].vector,Z=t[0].point,rt=Z,H=Z,R=rt,pt=!1;for(let v=0;v<t.length;v++){let{pressure:E}=t[v],{point:y,vector:b,distance:_t,runningLength:X}=t[v];if(v<t.length-1&&d-X<3)continue;if(i){if(r){let q=V(1,_t/e),gt=V(1,1-q);E=V(1,k+(gt-k)*(q*zt))}$=Kt(e,i,E,a)}else $=e/2;ht===void 0&&(ht=$);let Wt=X<u?p(X/u):1,te=d-X<m?f((d-X)/m):1;$=Math.max(.01,$*Math.min(Wt,te));let Ct=(v<t.length-1?t[v+1]:t[v]).vector,vt=v<t.length-1?qt(b,Ct):1,ee=qt(b,ft)<0&&!pt,Lt=vt!==null&&vt<0;if(ee||Lt){let q=L(Q(ft),$);for(let gt=1/13,ot=0;ot<=1;ot+=gt)H=J(C(y,q),y,W*ot),w.push(H),R=J(N(y,q),y,W*-ot),h.push(R);Z=H,rt=R,Lt&&(pt=!0);continue}if(pt=!1,v===t.length-1){let q=L(Q(b),$);w.push(C(y,q)),h.push(N(y,q));continue}let Nt=L(Q($t(Ct,b,vt)),$);H=C(y,Nt),(v<=1||Ht(Z,H)>x)&&(w.push(H),Z=H),R=N(y,Nt),(v<=1||Ht(rt,R)>x)&&(h.push(R),rt=R),k=E,ft=b}let F=t[0].point.slice(0,2),K=t.length>1?t[t.length-1].point.slice(0,2):N(t[0].point,[1,1]),mt=[],it=[];if(t.length===1){if(!(u||m)||c){let v=Rt(F,Zt(Q(C(F,K))),-(ht||$)),E=[];for(let y=1/13,b=y;b<=1;b+=y)E.push(J(v,F,W*2*b));return E}}else{if(!(u||m&&t.length===1))if(g)for(let E=1/13,y=E;y<=1;y+=E){let b=J(h[0],F,W*y);mt.push(b)}else{let E=C(w[0],h[0]),y=L(E,.5),b=L(E,.51);mt.push(C(F,y),C(F,b),N(F,b),N(F,y))}let v=Q(Le(t[t.length-1].vector));if(m||u&&t.length===1)it.push(K);else if(_){let E=Rt(K,v,$);for(let y=1/29,b=y;b<1;b+=y)it.push(J(E,K,W*3*b))}else it.push(N(K,L(v,$)),N(K,L(v,$*.99)),C(K,L(v,$*.99)),C(K,L(v,$)))}return w.concat(it,h.reverse(),mt)}function Fe(t,s={}){var e;let{streamline:n=.5,size:i=16,last:r=!1}=s;if(t.length===0)return[];let a=.15+(1-n)*.85,o=Array.isArray(t[0])?t:t.map(({x:f,y:d,pressure:u=.5})=>[f,d,u]);if(o.length===2){let f=o[1];o=o.slice(0,-1);for(let d=1;d<5;d++)o.push($t(o[0],f,d/4))}o.length===1&&(o=[...o,[...N(o[0],[1,1]),...o[0].slice(2)]]);let l=[{point:[o[0][0],o[0][1]],pressure:o[0][2]>=0?o[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,g=0,p=l[0],_=o.length-1;for(let f=1;f<o.length;f++){let d=r&&f===_?o[f].slice(0,2):$t(p.point,o[f],a);if(Te(p.point,d))continue;let u=Ie(d,p.point);if(g+=u,f<_&&!c){if(g<i)continue;c=!0}p={point:d,pressure:o[f][2]>=0?o[f][2]:.5,vector:Zt(C(p.point,d)),distance:u,runningLength:g},l.push(p)}return l[0].vector=((e=l[1])==null?void 0:e.vector)||[0,0],l}function Ke(t,s={}){return Oe(Fe(t,s),s)}function ct(t,s){return t-s}function qe(t){return t<0?-1:1}function dt(t){return[Math.abs(t),qe(t)]}function Xt(){const t=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}var He=2,A=He,Y=class{constructor(t){this.drauu=t,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(t){}onUnselected(){}onStart(t){}onMove(t){return!1}onEnd(t){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(t){var s,e,n;const i=this.drauu.el,r=(s=this.drauu.options.coordinateScale)!=null?s:1,a=(e=this.drauu.options.offset)!=null?e:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const o=this.drauu.el.getBoundingClientRect();return{x:(t.pageX-o.left+a.x)*r,y:(t.pageY-o.top+a.y)*r,pressure:t.pressure}}else{const o=this.drauu.svgPoint;o.x=t.clientX+a.x,o.y=t.clientY+a.y;const l=o.matrixTransform((n=i.getScreenCTM())==null?void 0:n.inverse());return{x:l.x*r,y:l.y*r,pressure:t.pressure}}}createElement(t,s){var e;const n=document.createElementNS("http://www.w3.org/2000/svg",t),i=s?kt(kt({},this.brush),s):this.brush;return n.setAttribute("fill",(e=i.fill)!=null?e:"transparent"),n.setAttribute("stroke",i.color),n.setAttribute("stroke-width",i.size.toString()),n.setAttribute("stroke-linecap","round"),i.dasharray&&n.setAttribute("stroke-dasharray",i.dasharray),n}attr(t,s){this.el.setAttribute(t,typeof s=="string"?s:s.toFixed(A))}_setEvent(t){this.event=t,this.point=this.getMousePosition(t)}_eventDown(t){return this._setEvent(t),this.start=this.point,this.onStart(this.point)}_eventMove(t){return this._setEvent(t),this.onMove(this.point)}_eventUp(t){return this._setEvent(t),this.onEnd(this.point)}},Re=class Qt extends Y{constructor(){super(...arguments),this.points=[]}onStart(s){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[s],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(s){return this.el||this.onStart(s),this.points[this.points.length-1]!==s&&this.points.push(s),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const s=this.el;return this.el=null,!!s}getSvgData(s){return Qt.getSvgData(s,this.brush)}static getSvgData(s,e){const n=Ke(s,kt({size:e.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},e.stylusOptions));if(!n.length)return"";const i=n.reduce((r,[a,o],l,c)=>{const[g,p]=c[(l+1)%c.length];return r.push(a,o,(a+g)/2,(o+p)/2),r},["M",...n[0],"Q"]);return i.push("Z"),i.map(r=>typeof r=="number"?r.toFixed(2):r).join(" ")}},ze=class extends Y{onStart(t){return this.el=this.createElement("ellipse"),this.attr("cx",t.x),this.attr("cy",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[s,e]=dt(t.x-this.start.x),[n,i]=dt(t.y-this.start.y);if(this.shiftPressed){const r=Math.min(s,n);s=r,n=r}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",s),this.attr("ry",n);else{const[r,a]=[this.start.x,this.start.x+s*e].sort(ct),[o,l]=[this.start.y,this.start.y+n*i].sort(ct);this.attr("cx",(r+a)/2),this.attr("cy",(o+l)/2),this.attr("rx",(a-r)/2),this.attr("ry",(l-o)/2)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function Jt(t,s){const e=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("fill",s),n.setAttribute("id",t),n.setAttribute("viewBox","0 -5 10 10"),n.setAttribute("refX","5"),n.setAttribute("refY","0"),n.setAttribute("markerWidth","4"),n.setAttribute("markerHeight","4"),n.setAttribute("orient","auto"),i.setAttribute("d","M0,-5L10,0L0,5"),n.appendChild(i),e.appendChild(n),e}var Be=class extends Y{onStart(t){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",t.x),this.attr("y1",t.y),this.attr("x2",t.x),this.attr("y2",t.y),this.brush.arrowEnd){const s=Xt(),e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.append(Jt(s,this.brush.color)),e.append(this.el),this.attr("marker-end",`url(#${s})`),e}return this.el}onMove(t){if(!this.el)return!1;let{x:s,y:e}=t;if(this.shiftPressed){const n=t.x-this.start.x,i=t.y-this.start.y;if(i!==0){let r=n/i;r=Math.round(r),Math.abs(r)<=1?(s=this.start.x+i*r,e=this.start.y+i):(s=this.start.x+n,e=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-s),this.attr("y1",this.start.y*2-e),this.attr("x2",s),this.attr("y2",e)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",s),this.attr("y2",e)),!0}onEnd(){const t=this.el;return this.el=null,!(!t||t.getTotalLength()<5)}},Ge=class extends Y{onStart(t){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",t.x),this.attr("y",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[s,e]=dt(t.x-this.start.x),[n,i]=dt(t.y-this.start.y);if(this.shiftPressed){const r=Math.min(s,n);s=r,n=r}if(this.altPressed)this.attr("x",this.start.x-s),this.attr("y",this.start.y-n),this.attr("width",s*2),this.attr("height",n*2);else{const[r,a]=[this.start.x,this.start.x+s*e].sort(ct),[o,l]=[this.start.y,this.start.y+n*i].sort(ct);this.attr("x",r),this.attr("y",o),this.attr("width",a-r),this.attr("height",l-o)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function Ve(t,s){const e=t.x-s.x,n=t.y-s.y;return e*e+n*n}function Ue(t,s,e){let n=s.x,i=s.y,r=e.x-n,a=e.y-i;if(r!==0||a!==0){const o=((t.x-n)*r+(t.y-i)*a)/(r*r+a*a);o>1?(n=e.x,i=e.y):o>0&&(n+=r*o,i+=a*o)}return r=t.x-n,a=t.y-i,r*r+a*a}function Ye(t,s){let e=t[0];const n=[e];let i;for(let r=1,a=t.length;r<a;r++)i=t[r],Ve(i,e)>s&&(n.push(i),e=i);return e!==i&&i&&n.push(i),n}function Et(t,s,e,n,i){let r=n,a=0;for(let o=s+1;o<e;o++){const l=Ue(t[o],t[s],t[e]);l>r&&(a=o,r=l)}r>n&&(a-s>1&&Et(t,s,a,n,i),i.push(t[a]),e-a>1&&Et(t,a,e,n,i))}function Ze(t,s){const e=t.length-1,n=[t[0]];return Et(t,0,e,s,n),n.push(t[e]),n}function Bt(t,s,e=!1){if(t.length<=2)return t;const n=s*s;return t=e?t:Ye(t,n),t=Ze(t,n),t}var Xe=class z extends Y{constructor(){super(...arguments),this.points=[],this.count=0}onStart(s){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[s],this.brush.arrowEnd){this.arrowId=Xt();const e=Jt(this.arrowId,this.brush.color);this.el.appendChild(e)}return this.el}onMove(s){return this.el||this.onStart(s),this.points[this.points.length-1]!==s&&(this.points.push(s),this.count+=1),this.count>5&&(this.points=Bt(this.points,1,!0),this.count=0),this.attr("d",z.toSvgData(this.points)),!0}onEnd(){const s=this.el;return this.el=null,!(!s||(s.setAttribute("d",z.toSvgData(Bt(this.points,1,!0))),!s.getTotalLength()))}static line(s,e){const n=e.x-s.x,i=e.y-s.y;return{length:Math.sqrt(n**2+i**2),angle:Math.atan2(i,n)}}static controlPoint(s,e,n,i){const r=e||s,a=n||s,o=.2,l=z.line(r,a),c=l.angle+(i?Math.PI:0),g=l.length*o,p=s.x+Math.cos(c)*g,_=s.y+Math.sin(c)*g;return{x:p,y:_}}static bezierCommand(s,e,n){const i=z.controlPoint(n[e-1],n[e-2],s),r=z.controlPoint(s,n[e-1],n[e+1],!0);return`C ${i.x.toFixed(A)},${i.y.toFixed(A)} ${r.x.toFixed(A)},${r.y.toFixed(A)} ${s.x.toFixed(A)},${s.y.toFixed(A)}`}static toSvgData(s){return s.reduce((e,n,i,r)=>i===0?`M ${n.x.toFixed(A)},${n.y.toFixed(A)}`:`${e} ${z.bezierCommand(n,i,r)}`,"")}},Qe=class extends Y{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(t){const s=(e,n)=>{if(e&&e.length)for(let i=0;i<e.length;i++){const r=e[i];if(r.getTotalLength){const a=r.getTotalLength();for(let o=0;o<this.pathSubFactor;o++){const l=r.getPointAtLength(a*o/this.pathSubFactor),c=r.getPointAtLength(a*(o+1)/this.pathSubFactor);this.pathFragments.push({x1:l.x,x2:c.x,y1:l.y,y2:c.y,segment:o,element:n||r})}}else r.children&&s(r.children,r)}};t&&s(t.children)}onUnselected(){this.pathFragments=[]}onStart(t){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=t.x,this.svgPointPrevious.y=t.y}onMove(t){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=t.x,this.svgPointCurrent.y=t.y;const s=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,s}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const t=this._erased;return this._erased=[],{undo:()=>t.forEach(s=>this.drauu._restoreNode(s)),redo:()=>t.forEach(s=>this.drauu._removeNode(s))}}checkAndEraseElement(){if(this.pathFragments.length)for(let t=0;t<this.pathFragments.length;t++){const s=this.pathFragments[t],e={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(s,e)&&(this.drauu._removeNode(s.element),this._erased.push(s.element))}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(t=>!this._erased.includes(t.element))),this._erased.length>0}lineLineIntersect(t,s){const e=t.x1,n=t.x2,i=s.x1,r=s.x2,a=t.y1,o=t.y2,l=s.y1,c=s.y2,g=(e-n)*(l-c)-(a-o)*(i-r),p=(e*o-a*n)*(i-r)-(e-n)*(i*c-l*r),_=(e*o-a*n)*(l-c)-(a-o)*(i*c-l*r),f=(d,u,m)=>d>=u&&d<=m?!0:d>=m&&d<=u;if(g===0)return!1;{const d={x:p/g,y:_/g};return f(d.x,e,n)&&f(d.y,a,o)&&f(d.x,i,r)&&f(d.y,l,c)}}};function Je(t){return{draw:new Xe(t),stylus:new Re(t),line:new Be(t),rectangle:new Ge(t),ellipse:new ze(t),eraseLine:new Qe(t)}}var We=class{constructor(t={}){this.options=t,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=Ce(),this._originalPointerId=null,this._models=Je(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),t.el&&this.mount(t.el,t.eventTarget,t.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(t){this._models[this.mode].onUnselected(),this.options.brush.mode=t,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(t){this.options.brush=t}resolveSelector(t){return typeof t=="string"?document.querySelector(t):t||null}mount(t,s,e=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(t),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const n=this.resolveSelector(s)||this.el,i=this.eventStart.bind(this),r=this.eventMove.bind(this),a=this.eventEnd.bind(this),o=this.eventKeyboard.bind(this);n.addEventListener("pointerdown",i,{passive:!1}),e.addEventListener("pointermove",r,{passive:!1}),e.addEventListener("pointerup",a,{passive:!1}),e.addEventListener("pointercancel",a,{passive:!1}),e.addEventListener("keydown",o,!1),e.addEventListener("keyup",o,!1),this._disposables.push(()=>{n.removeEventListener("pointerdown",i),e.removeEventListener("pointermove",r),e.removeEventListener("pointerup",a),e.removeEventListener("pointercancel",a),e.removeEventListener("keydown",o,!1),e.removeEventListener("keyup",o,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(t=>t()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(t,s){return this._emitter.on(t,s)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(t){!this.acceptsInput(t)||!this.drawing||this.model._eventMove(t)&&(t.stopPropagation(),t.preventDefault(),this._emitter.emit("changed"))}eventStart(t){this.acceptsInput(t)&&(t.stopPropagation(),t.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=t.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(t),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(t){if(!this.acceptsInput(t)||!this.drawing)return;const s=this.model._eventUp(t);if(!s)this.cancel();else if(s===!0){const e=this._currentNode;this._appendNode(e),this.commit({undo:()=>this._removeNode(e),redo:()=>this._restoreNode(e)})}else this.commit(s);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(t){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(t.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==t.pointerId)}eventKeyboard(t){this.shiftPressed===t.shiftKey&&this.altPressed===t.altKey||(this.shiftPressed=t.shiftKey,this.altPressed=t.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(t){this._opStack.length=this._opIndex,this._opStack.push(t),this._opIndex++;const s=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",s)}clear(){this._opStack.length=0,this._opIndex=0,this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(t){this.clear(),this.el.innerHTML=t}_appendNode(t){const s=this._elements.at(-1);s?s.after(t):this.el.append(t);const e=this._elements.push(t)-1;t.dataset.drauu_index=e.toString()}_removeNode(t){t.remove(),this._elements[+t.dataset.drauu_index]=null}_restoreNode(t){const s=+t.dataset.drauu_index;this._elements[s]=t;for(let e=s-1;e>=0;e--){const n=this._elements[e];if(n){n.after(t);return}}this.el.prepend(t)}};function ts(t){return new We(t)}const es=se(()=>{const{currentSlideNo:t,isPresenter:s}=st(),e=["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#ffffff","#000000"],n=xt("slidev-drawing-enabled",!1),i=xt("slidev-drawing-pinned",!1),r=ne(xt("slidev-drawing-brush",{color:e[0],size:4,mode:"stylus"})),a=T(!1),o=T(!1),l=T(!1),c=T(!1),g=T("stylus"),p=M(()=>bt.drawings.syncAll||s.value);let _=!1;const f=M({get(){return g.value},set(h){g.value=h,h==="arrow"?(u.mode="line",r.arrowEnd=!0):(u.mode=h,r.arrowEnd=!1)}}),d=re({brush:r,acceptsInputTypes:M(()=>n.value&&(!bt.drawings.presenterOnly||s.value)?void 0:["pen"]),coordinateTransform:!1}),u=ie(ts(d));function m(){u.clear(),p.value&&Dt(t.value,"")}function x(){var h;l.value=u.canRedo(),o.value=u.canUndo(),c.value=!!((h=u.el)!=null&&h.children.length)}function w(h){_=!0;const k=St[h||t.value];k!=null?u.load(k):u.clear(),x(),_=!1}return u.on("changed",()=>{if(x(),!_){const h=u.dump(),k=t.value;(St[k]||"")!==h&&p.value&&Dt(k,u.dump())}}),fe(h=>{_=!0,h[t.value]!=null&&u.load(h[t.value]||""),_=!1,x()}),oe(()=>{ae(t,()=>{u.mounted&&w()},{immediate:!0})}),u.on("start",()=>a.value=!0),u.on("end",()=>a.value=!1),window.addEventListener("keydown",h=>{if(!n.value||pe.value)return;const k=!h.ctrlKey&&!h.altKey&&!h.shiftKey&&!h.metaKey;let $=!0;h.code==="KeyZ"&&(h.ctrlKey||h.metaKey)?h.shiftKey?u.redo():u.undo():h.code==="Escape"?n.value=!1:h.code==="KeyL"&&k?f.value="line":h.code==="KeyA"&&k?f.value="arrow":h.code==="KeyS"&&k?f.value="stylus":h.code==="KeyR"&&k?f.value="rectangle":h.code==="KeyE"&&k?f.value="ellipse":h.code==="KeyC"&&k?m():h.code.startsWith("Digit")&&k&&+h.code[5]<=e.length?r.color=e[+h.code[5]-1]:$=!1,$&&(h.preventDefault(),h.stopPropagation())},!1),{brush:r,brushColors:e,canClear:c,canRedo:l,canUndo:o,clear:m,drauu:u,drauuOptions:d,drawingEnabled:n,drawingMode:f,drawingPinned:i,drawingState:St,isDrawing:a,loadCanvas:w}}),ss=D({__name:"SlideContainer",props:{width:{type:Number},meta:{default:()=>({})},isMain:{type:Boolean,default:!1}},setup(t,{expose:s}){s();const e=t,{isPrintMode:n}=st(),i=T(null),r=le(i),a=T(null),o=M(()=>e.width??r.width.value),l=M(()=>e.width?e.width/jt.value:r.height.value),c=M(()=>It.value&&!n.value?+It.value:Math.min(o.value/At.value,l.value/Pt.value)),g=M(()=>({height:`${Pt.value}px`,width:`${At.value}px`,transform:`translate(-50%, -50%) scale(${c.value})`,"--slidev-slide-scale":c.value})),p=M(()=>e.width?{width:`${e.width}px`,height:`${e.width/jt.value}px`}:{});e.isMain&&ue(M(()=>`:root { --slidev-slide-scale: ${c.value}; }`)),B(me,c),B(_e,a);const _={props:e,isPrintMode:n,container:i,containerSize:r,slideElement:a,width:o,height:l,scale:c,contentStyle:g,containerStyle:p};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),ns=["id"],rs=["id"];function is(t,s,e,n,i,r){return S(),P("div",{id:e.isMain?"slide-container":void 0,ref:"container",class:"slidev-slide-container",style:et(n.containerStyle)},[tt("div",{id:e.isMain?"slide-content":void 0,ref:"slideElement",class:"slidev-slide-content",style:et(n.contentStyle)},[lt(t.$slots,"default",{},void 0,!0)],12,rs),lt(t.$slots,"controls",{},void 0,!0)],12,ns)}const Vs=I(ss,[["render",is],["__scopeId","data-v-6d7d4d22"],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@slidev+client@0.49.10_postcss@8.4.38_vite@5.2.13/node_modules/@slidev/client/internals/SlideContainer.vue"]]),os=D({__name:"SlideLoading",setup(t,{expose:s}){s();const e=T(!1);Gt(()=>{setTimeout(()=>{e.value=!0},200)});const n={timeout:e};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),as={class:"h-full w-full flex items-center justify-center gap-2 slidev-slide-loading"},ls=tt("div",{class:"i-svg-spinners-90-ring-with-bg text-xl"},null,-1),us=tt("div",null,"Loading slide...",-1);function cs(t,s,e,n,i,r){return S(),P("div",as,[n.timeout?(S(),P(U,{key:0},[ls,us],64)):j("v-if",!0)])}const ds=I(os,[["render",cs],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@slidev+client@0.49.10_postcss@8.4.38_vite@5.2.13/node_modules/@slidev/client/internals/SlideLoading.vue"]]),hs=D({__name:"Blackout",setup(t,{expose:s}){s();const{$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l}=nt(),{isPresenter:c}=st(),g=ve;let p={};p["--slide-height"]=Pt+"px";const _={$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l,isPresenter:c,sharedState:g,get slideHeightAsVariable(){return p},set slideHeightAsVariable(f){p=f}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}});function fs(t,s,e,n,i,r){return S(),P("div",{style:et(n.slideHeightAsVariable),class:G({blackout:!0,"hidden-blackout":!(n.sharedState.blackout&&!n.isPresenter),"presenter-blackout":n.sharedState.blackout&&n.isPresenter})},"Blacked out",6)}const ps=I(hs,[["render",fs],["__scopeId","data-v-12f292a5"],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@twitwi+slidev-addon-ultracharger@1.1.3/node_modules/@twitwi/slidev-addon-ultracharger/components/Blackout.vue"]]),ms=D({__name:"Link",props:{to:{type:[Number,String],required:!0},title:{type:String,required:!1}},setup(t,{expose:s}){s();const{isPrintMode:e}=st(),n={isPrintMode:e};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),_s=["href","innerHTML"],vs=["href"];function gs(t,s,e,n,i,r){const a=Vt("RouterLink");return!n.isPrintMode&&e.title?(S(),ut(a,{key:0,to:String(e.to),onClick:s[0]||(s[0]=o=>o.target.blur()),innerHTML:e.title},null,8,["to","innerHTML"])):!n.isPrintMode&&!e.title?(S(),ut(a,{key:1,to:String(e.to),onClick:s[1]||(s[1]=o=>o.target.blur())},{default:Ut(()=>[lt(t.$slots,"default")]),_:3},8,["to"])):n.isPrintMode&&e.title?(S(),P("a",{key:2,href:`#${e.to}`,innerHTML:e.title},null,8,_s)):(S(),P("a",{key:3,href:`#${e.to}`},[lt(t.$slots,"default")],8,vs))}const ys=I(ms,[["render",gs],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@slidev+client@0.49.10_postcss@8.4.38_vite@5.2.13/node_modules/@slidev/client/builtin/Link.vue"]]),xs=D({__name:"TocListNG",props:{level:{type:Number,required:!0,default:1},list:{type:Array,required:!0},mode:{type:String,required:!1,default:"ul"},dots:{type:String,required:!1,default:"●○◌◡."}},setup(t,{expose:s}){s();const{$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l}=nt(),c={$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function Ss(t,s,e,n,i,r){const a=ys,o=Vt("TocListNG",!0);return S(),P(U,null,[e.mode==="ul"&&e.list&&e.list.length>0?(S(),P("ul",{key:0,class:G(["slidev-toc-list",`slidev-toc-list-level-${e.level}`])},[(S(!0),P(U,null,Tt(e.list,l=>(S(),P("li",{key:l.path,class:G(["slidev-toc-item",{"slidev-toc-item-active":l.active},{"slidev-toc-item-parent-active":l.activeParent}])},[O(a,{class:G({active:l.active}),to:l.path,innerHTML:l.title},null,8,["class","to","innerHTML"]),O(o,{level:e.level+1,list:l.children},null,8,["level","list"])],2))),128))],2)):j("v-if",!0),e.mode==="span"&&e.list&&e.list.length>0?(S(!0),P(U,{key:1},Tt(e.list,l=>(S(),P(U,{key:l.path},[O(a,{class:G(["slidev-toc-dot",l.active?"slidev-toc-dot-active":"",`slidev-toc-dot-level-${e.level}`]),to:l.path},{default:Ut(()=>[Yt(at(e.dots[Math.min(e.level,e.dots.length)-1]),1)]),_:2},1032,["class","to"]),O(o,{level:e.level+1,list:l.children,mode:e.mode,dots:e.dots},null,8,["level","list","mode","dots"])],64))),128)):j("v-if",!0)],64)}const ws=I(xs,[["render",Ss],["__scopeId","data-v-4c0d88c9"],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@twitwi+slidev-addon-ultracharger@1.1.3/node_modules/@twitwi/slidev-addon-ultracharger/components/TocListNG.vue"]]),bs=D({__name:"TocNG",props:{columns:{type:[String,Number],required:!1,default:1},maxDepth:{type:[String,Number],required:!1,default:1/0},minDepth:{type:[String,Number],required:!1,default:1},mode:{type:String,required:!1,default:"all"}},setup(t,{expose:s}){s();const{$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l}=nt(),{tocTree:c}=st(),g=t;function p(m,x=1){if(x>Number(g.maxDepth))return[];if(x<Number(g.minDepth)){const w=m.find(h=>h.active||h.activeParent);return w?p(w.children,x+1):[]}return m.map(w=>({...w,children:p(w.children,x+1)}))}function _(m){return m.filter(x=>x.active||x.activeParent||x.hasActiveParent).map(x=>({...x,children:_(x.children)}))}function f(m){const x=m.some(w=>w.active||w.activeParent||w.hasActiveParent);return m.filter(()=>x).map(w=>({...w,children:f(w.children)}))}const d=M(()=>{let m=p(c.value);return g.mode==="onlyCurrentTree"?m=_(m):g.mode==="onlySiblings"&&(m=f(m)),m}),u={$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l,slidevTocTree:c,props:g,filterTreeDepth:p,filterOnlyCurrentTree:_,filterOnlySiblings:f,toc:d};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function Ps(t,s,e,n,i,r){const a=ws;return S(),P("div",{class:"slidev-toc",style:et(`column-count:${e.columns}`)},[O(a,{level:1,list:n.toc,mode:e.mode==="allDots"?"span":"ul"},null,8,["list","mode"])],4)}const ks=I(bs,[["render",Ps],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@twitwi+slidev-addon-ultracharger@1.1.3/node_modules/@twitwi/slidev-addon-ultracharger/components/TocNG.vue"]]),$s=D({__name:"global-top",setup(t,{expose:s}){s();const{$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l}=nt(),c=d=>{var u,m;return(m=(u=e.configs.addonsConfig)==null?void 0:u.ultracharger)==null?void 0:m[d]},g=d=>{var u;return!((u=c("disable"))!=null&&u.includes(d))},p=M(()=>{const d=e.nav.total;let u=c("fakeEnd")??"";return u===""?[d]:(typeof u=="number"&&(u=[u]),typeof u=="string"&&(u=u.split(" ").map(m=>parseInt(m))),u=u.map(m=>m<0?d+m:m),u.push(d),u.sort((m,x)=>m-x),u)}),_=M(()=>p.value.find(d=>d>=e.nav.currentPage)),f={$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l,conf:c,has:g,fakeEnds:p,slideCount:_};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),Es={key:0,class:"absolute bottom-0 text-center left-0 right-0 px-2 py-0 text-xs"};function Ms(t,s,e,n,i,r){const a=Pe,o=ks,l=ps;return S(),P(U,null,[n.has("metaFooter")&&n.$slidev.nav.currentLayout!=="cover"?(S(),P("footer",Es,[tt("button",{onClick:s[0]||(s[0]=c=>n.$slidev.nav.openInEditor()),title:"Open in Editor",class:"icon-btn opacity-20 !border-none !hover:text-white p-0"},[O(a)]),Yt(" "+at((n.conf("metaFooter")??"date author morefooter").split(" ").map(c=>n.$slidev.configs[c]).filter(c=>!!c).join(" − "))+" − "+at(n.$slidev.nav.currentPage)+" / "+at(n.slideCount),1)])):j("v-if",!0),tt("footer",null,[j("AutoPlay /"),n.has("tocFooter")?(S(),ut(o,{key:0,mode:"allDots","max-depth":1,class:"absolute bottom-0 right-5"})):j("v-if",!0),n.has("blackout")?(S(),ut(l,{key:1})):j("v-if",!0)]),j('TOC mode="dots" class="absolute bottom-0 right-5" /')],64)}const Cs=I($s,[["render",Ms],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@twitwi+slidev-addon-ultracharger@1.1.3/node_modules/@twitwi/slidev-addon-ultracharger/global-top.vue"]]),Ls=D({__name:"global-bottom",setup(t,{expose:s}){s();const{$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l}=nt(),c=_=>{var f,d;return(d=(f=e.configs.addonsConfig)==null?void 0:f.ultracharger)==null?void 0:d[_]},p={$slidev:e,$nav:n,$clicksContext:i,$clicks:r,$page:a,$renderContext:o,$frontmatter:l,conf:c,has:_=>{var f;return!((f=c("disable"))!=null&&f.includes(_))}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}});function Ns(t,s,e,n,i,r){return n.has("metaOnslide")?(S(),P("span",{key:0,style:{display:"none"},class:G({["onslide-"+n.$nav.currentPage]:!0,["onslide-id-"+n.$nav.currentSlideId]:!0,["onclick-"+n.$nav.clicks]:!0,["onlayout-"+n.$nav.currentLayout]:!0,["onroute-"+n.$nav.currentPath]:!0})},null,2)):j("v-if",!0)}const Ts=I(Ls,[["render",Ns],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@twitwi+slidev-addon-ultracharger@1.1.3/node_modules/@twitwi/slidev-addon-ultracharger/global-bottom.vue"]]),Us={render:()=>[Mt(Cs)]},Ys={render:()=>[Mt(Ts)]},Ds={render:()=>[]},js={render:()=>[]},Is=D({__name:"SlideWrapper",props:{clicksContext:{type:Object,required:!0},renderContext:{type:String,default:"slide"},route:{type:Object,required:!0}},setup(t,{expose:s}){s();const e=t,n=M(()=>{var l,c;return((c=(l=e.route.meta)==null?void 0:l.slide)==null?void 0:c.frontmatter.zoom)??1});B(ge,e.route),B(ye,T(e.route.no)),B(xe,T(e.renderContext)),B(Se,ce(e,"clicksContext")),B(we,n);const i=M(()=>n.value===1?void 0:{width:`${100/n.value}%`,height:`${100/n.value}%`,transformOrigin:"top left",transform:`scale(${n.value})`}),r=M(()=>({...i.value,"user-select":bt.selectable?void 0:"none"})),a=M(()=>e.route&&de({loader:async()=>{const l=await e.route.component();return D({setup(c,{attrs:g}){return Gt(()=>{var p,_;return(_=(p=e.clicksContext)==null?void 0:p.onMounted)==null?void 0:_.call(p)}),()=>Mt(l.default,g)}})},delay:300,loadingComponent:ds})),o={props:e,zoom:n,zoomStyle:i,style:r,SlideComponent:a,get getSlideClass(){return be},get SlideBottom(){return js},get SlideTop(){return Ds}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),As=["data-slidev-no"];function Os(t,s,e,n,i,r){return S(),P("div",{"data-slidev-no":n.props.route.no,class:G(n.getSlideClass(e.route,["slide","presenter"].includes(n.props.renderContext)?"":"disable-view-transition")),style:et(n.style)},[O(n.SlideBottom),O(n.SlideComponent),O(n.SlideTop)],14,As)}const Zs=I(Is,[["render",Os],["__scopeId","data-v-8be9ae01"],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@slidev+client@0.49.10_postcss@8.4.38_vite@5.2.13/node_modules/@slidev/client/internals/SlideWrapper.vue"]]),Fs=D({__name:"DrawingPreview",props:{page:{type:Number,required:!0}},setup(t,{expose:s}){s();const{drawingState:e}=es(),n={drawingState:e};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),Ks=["innerHTML"];function qs(t,s,e,n,i,r){return n.drawingState[e.page]?(S(),P("svg",{key:0,class:"w-full h-full absolute top-0 pointer-events-none",innerHTML:n.drawingState[e.page]},null,8,Ks)):j("v-if",!0)}const Xs=I(Fs,[["render",qs],["__file","/home/twilight/projects/deck-js-stuffs/slidev-addon-ultracharger-demo/node_modules/.pnpm/@slidev+client@0.49.10_postcss@8.4.38_vite@5.2.13/node_modules/@slidev/client/internals/DrawingPreview.vue"]]);export{Xs as D,Ys as G,Vs as S,Zs as a,es as b,Gs as c,Us as d,ke as u};
